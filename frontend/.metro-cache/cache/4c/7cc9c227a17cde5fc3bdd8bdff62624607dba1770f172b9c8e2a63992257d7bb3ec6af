{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":35,"index":195}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => {},\n    register: async () => {},\n    logout: async () => {},\n    switchRole: async () => {},\n    refreshUser: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        if (storedToken) {\n          setToken(storedToken);\n          const userData = await _utilsApi.api.getMe();\n          setUser(userData);\n        }\n      } catch (e) {\n        await AsyncStorage.default.removeItem('auth_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const result = await _utilsApi.api.login({\n        email,\n        password\n      });\n      await AsyncStorage.default.setItem('auth_token', result.token);\n      setToken(result.token);\n      setUser(result.user);\n    };\n    const register = async data => {\n      const result = await _utilsApi.api.register(data);\n      await AsyncStorage.default.setItem('auth_token', result.token);\n      setToken(result.token);\n      setUser(result.user);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    const switchRole = async role => {\n      const updatedUser = await _utilsApi.api.switchRole(role);\n      setUser(updatedUser);\n    };\n    const refreshUser = async () => {\n      const userData = await _utilsApi.api.getMe();\n      setUser(userData);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        switchRole,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this);\n  }\n  const useAuth = () => (0, _react.useContext)(AuthContext);\n});","lineCount":105,"map":[[13,2,43,0,"exports"],[13,9,43,0],[13,10,43,0,"AuthProvider"],[13,22,43,0],[13,25,43,0,"AuthProvider"],[13,37,43,0],[14,2,104,0,"Object"],[14,8,104,0],[14,9,104,0,"defineProperty"],[14,23,104,0],[14,24,104,0,"exports"],[14,31,104,0],[15,4,104,0,"enumerable"],[15,14,104,0],[16,4,104,0,"get"],[16,7,104,0],[16,18,104,0,"get"],[16,19,104,0],[17,6,104,0],[17,13,104,0,"useAuth"],[17,20,104,0],[18,4,104,0],[19,2,104,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,42,2,0],[21,45,2,0,"require"],[21,52,2,0],[21,53,2,0,"_dependencyMap"],[21,67,2,0],[22,2,2,0],[22,6,2,0,"AsyncStorage"],[22,18,2,0],[22,21,2,0,"_interopDefault"],[22,36,2,0],[22,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,73,2,0],[23,2,3,0],[23,6,3,0,"_utilsApi"],[23,15,3,0],[23,18,3,0,"require"],[23,25,3,0],[23,26,3,0,"_dependencyMap"],[23,40,3,0],[24,2,3,35],[24,6,3,35,"_reactJsxDevRuntime"],[24,25,3,35],[24,28,3,35,"require"],[24,35,3,35],[24,36,3,35,"_dependencyMap"],[24,50,3,35],[25,2,32,0],[25,8,32,6,"AuthContext"],[25,19,32,17],[25,35,32,20],[25,39,32,20,"createContext"],[25,45,32,33],[25,46,32,33,"createContext"],[25,59,32,33],[25,61,32,51],[26,4,33,2,"user"],[26,8,33,6],[26,10,33,8],[26,14,33,12],[27,4,34,2,"token"],[27,9,34,7],[27,11,34,9],[27,15,34,13],[28,4,35,2,"loading"],[28,11,35,9],[28,13,35,11],[28,17,35,15],[29,4,36,2,"login"],[29,9,36,7],[29,11,36,9],[29,17,36,9,"login"],[29,18,36,9],[29,23,36,21],[29,24,36,22],[29,25,36,23],[30,4,37,2,"register"],[30,12,37,10],[30,14,37,12],[30,20,37,12,"register"],[30,21,37,12],[30,26,37,24],[30,27,37,25],[30,28,37,26],[31,4,38,2,"logout"],[31,10,38,8],[31,12,38,10],[31,18,38,10,"logout"],[31,19,38,10],[31,24,38,22],[31,25,38,23],[31,26,38,24],[32,4,39,2,"switchRole"],[32,14,39,12],[32,16,39,14],[32,22,39,14,"switchRole"],[32,23,39,14],[32,28,39,26],[32,29,39,27],[32,30,39,28],[33,4,40,2,"refreshUser"],[33,15,40,13],[33,17,40,15],[33,23,40,15,"refreshUser"],[33,24,40,15],[33,29,40,27],[33,30,40,28],[34,2,41,0],[34,3,41,1],[34,4,41,2],[35,2,43,7],[35,11,43,16,"AuthProvider"],[35,23,43,28,"AuthProvider"],[35,24,43,29],[36,4,43,31,"children"],[37,2,43,65],[37,3,43,66],[37,5,43,68],[38,4,44,2],[38,10,44,8],[38,11,44,9,"user"],[38,15,44,13],[38,17,44,15,"setUser"],[38,24,44,22],[38,25,44,23],[38,28,44,26],[38,32,44,26,"useState"],[38,38,44,34],[38,39,44,34,"useState"],[38,47,44,34],[38,49,44,48],[38,53,44,52],[38,54,44,53],[39,4,45,2],[39,10,45,8],[39,11,45,9,"token"],[39,16,45,14],[39,18,45,16,"setToken"],[39,26,45,24],[39,27,45,25],[39,30,45,28],[39,34,45,28,"useState"],[39,40,45,36],[39,41,45,36,"useState"],[39,49,45,36],[39,51,45,52],[39,55,45,56],[39,56,45,57],[40,4,46,2],[40,10,46,8],[40,11,46,9,"loading"],[40,18,46,16],[40,20,46,18,"setLoading"],[40,30,46,28],[40,31,46,29],[40,34,46,32],[40,38,46,32,"useState"],[40,44,46,40],[40,45,46,40,"useState"],[40,53,46,40],[40,55,46,41],[40,59,46,45],[40,60,46,46],[41,4,48,2],[41,8,48,2,"useEffect"],[41,14,48,11],[41,15,48,11,"useEffect"],[41,24,48,11],[41,26,48,12],[41,32,48,18],[42,6,49,4,"loadStoredAuth"],[42,20,49,18],[42,21,49,19],[42,22,49,20],[43,4,50,2],[43,5,50,3],[43,7,50,5],[43,9,50,7],[43,10,50,8],[44,4,52,2],[44,10,52,8,"loadStoredAuth"],[44,24,52,22],[44,27,52,25],[44,33,52,25,"loadStoredAuth"],[44,34,52,25],[44,39,52,37],[45,6,53,4],[45,10,53,8],[46,8,54,6],[46,14,54,12,"storedToken"],[46,25,54,23],[46,28,54,26],[46,34,54,32,"AsyncStorage"],[46,46,54,44],[46,47,54,44,"default"],[46,54,54,44],[46,55,54,45,"getItem"],[46,62,54,52],[46,63,54,53],[46,75,54,65],[46,76,54,66],[47,8,55,6],[47,12,55,10,"storedToken"],[47,23,55,21],[47,25,55,23],[48,10,56,8,"setToken"],[48,18,56,16],[48,19,56,17,"storedToken"],[48,30,56,28],[48,31,56,29],[49,10,57,8],[49,16,57,14,"userData"],[49,24,57,22],[49,27,57,25],[49,33,57,31,"api"],[49,42,57,34],[49,43,57,34,"api"],[49,46,57,34],[49,47,57,35,"getMe"],[49,52,57,40],[49,53,57,41],[49,54,57,42],[50,10,58,8,"setUser"],[50,17,58,15],[50,18,58,16,"userData"],[50,26,58,24],[50,27,58,25],[51,8,59,6],[52,6,60,4],[52,7,60,5],[52,8,60,6],[52,15,60,13,"e"],[52,16,60,14],[52,18,60,16],[53,8,61,6],[53,14,61,12,"AsyncStorage"],[53,26,61,24],[53,27,61,24,"default"],[53,34,61,24],[53,35,61,25,"removeItem"],[53,45,61,35],[53,46,61,36],[53,58,61,48],[53,59,61,49],[54,6,62,4],[54,7,62,5],[54,16,62,14],[55,8,63,6,"setLoading"],[55,18,63,16],[55,19,63,17],[55,24,63,22],[55,25,63,23],[56,6,64,4],[57,4,65,2],[57,5,65,3],[58,4,67,2],[58,10,67,8,"login"],[58,15,67,13],[58,18,67,16],[58,24,67,16,"login"],[58,25,67,23,"email"],[58,30,67,36],[58,32,67,38,"password"],[58,40,67,54],[58,45,67,59],[59,6,68,4],[59,12,68,10,"result"],[59,18,68,16],[59,21,68,19],[59,27,68,25,"api"],[59,36,68,28],[59,37,68,28,"api"],[59,40,68,28],[59,41,68,29,"login"],[59,46,68,34],[59,47,68,35],[60,8,68,37,"email"],[60,13,68,42],[61,8,68,44,"password"],[62,6,68,53],[62,7,68,54],[62,8,68,55],[63,6,69,4],[63,12,69,10,"AsyncStorage"],[63,24,69,22],[63,25,69,22,"default"],[63,32,69,22],[63,33,69,23,"setItem"],[63,40,69,30],[63,41,69,31],[63,53,69,43],[63,55,69,45,"result"],[63,61,69,51],[63,62,69,52,"token"],[63,67,69,57],[63,68,69,58],[64,6,70,4,"setToken"],[64,14,70,12],[64,15,70,13,"result"],[64,21,70,19],[64,22,70,20,"token"],[64,27,70,25],[64,28,70,26],[65,6,71,4,"setUser"],[65,13,71,11],[65,14,71,12,"result"],[65,20,71,18],[65,21,71,19,"user"],[65,25,71,23],[65,26,71,24],[66,4,72,2],[66,5,72,3],[67,4,74,2],[67,10,74,8,"register"],[67,18,74,16],[67,21,74,19],[67,27,74,26,"data"],[67,31,74,35],[67,35,74,40],[68,6,75,4],[68,12,75,10,"result"],[68,18,75,16],[68,21,75,19],[68,27,75,25,"api"],[68,36,75,28],[68,37,75,28,"api"],[68,40,75,28],[68,41,75,29,"register"],[68,49,75,37],[68,50,75,38,"data"],[68,54,75,42],[68,55,75,43],[69,6,76,4],[69,12,76,10,"AsyncStorage"],[69,24,76,22],[69,25,76,22,"default"],[69,32,76,22],[69,33,76,23,"setItem"],[69,40,76,30],[69,41,76,31],[69,53,76,43],[69,55,76,45,"result"],[69,61,76,51],[69,62,76,52,"token"],[69,67,76,57],[69,68,76,58],[70,6,77,4,"setToken"],[70,14,77,12],[70,15,77,13,"result"],[70,21,77,19],[70,22,77,20,"token"],[70,27,77,25],[70,28,77,26],[71,6,78,4,"setUser"],[71,13,78,11],[71,14,78,12,"result"],[71,20,78,18],[71,21,78,19,"user"],[71,25,78,23],[71,26,78,24],[72,4,79,2],[72,5,79,3],[73,4,81,2],[73,10,81,8,"logout"],[73,16,81,14],[73,19,81,17],[73,25,81,17,"logout"],[73,26,81,17],[73,31,81,29],[74,6,82,4],[74,12,82,10,"AsyncStorage"],[74,24,82,22],[74,25,82,22,"default"],[74,32,82,22],[74,33,82,23,"removeItem"],[74,43,82,33],[74,44,82,34],[74,56,82,46],[74,57,82,47],[75,6,83,4,"setToken"],[75,14,83,12],[75,15,83,13],[75,19,83,17],[75,20,83,18],[76,6,84,4,"setUser"],[76,13,84,11],[76,14,84,12],[76,18,84,16],[76,19,84,17],[77,4,85,2],[77,5,85,3],[78,4,87,2],[78,10,87,8,"switchRole"],[78,20,87,18],[78,23,87,21],[78,29,87,28,"role"],[78,33,87,40],[78,37,87,45],[79,6,88,4],[79,12,88,10,"updatedUser"],[79,23,88,21],[79,26,88,24],[79,32,88,30,"api"],[79,41,88,33],[79,42,88,33,"api"],[79,45,88,33],[79,46,88,34,"switchRole"],[79,56,88,44],[79,57,88,45,"role"],[79,61,88,49],[79,62,88,50],[80,6,89,4,"setUser"],[80,13,89,11],[80,14,89,12,"updatedUser"],[80,25,89,23],[80,26,89,24],[81,4,90,2],[81,5,90,3],[82,4,92,2],[82,10,92,8,"refreshUser"],[82,21,92,19],[82,24,92,22],[82,30,92,22,"refreshUser"],[82,31,92,22],[82,36,92,34],[83,6,93,4],[83,12,93,10,"userData"],[83,20,93,18],[83,23,93,21],[83,29,93,27,"api"],[83,38,93,30],[83,39,93,30,"api"],[83,42,93,30],[83,43,93,31,"getMe"],[83,48,93,36],[83,49,93,37],[83,50,93,38],[84,6,94,4,"setUser"],[84,13,94,11],[84,14,94,12,"userData"],[84,22,94,20],[84,23,94,21],[85,4,95,2],[85,5,95,3],[86,4,97,2],[86,24,98,4],[86,28,98,4,"_reactJsxDevRuntime"],[86,47,98,4],[86,48,98,4,"jsxDEV"],[86,54,98,4],[86,56,98,5,"AuthContext"],[86,67,98,16],[86,68,98,17,"Provider"],[86,76,98,25],[87,6,98,26,"value"],[87,11,98,31],[87,13,98,33],[88,8,98,35,"user"],[88,12,98,39],[89,8,98,41,"token"],[89,13,98,46],[90,8,98,48,"loading"],[90,15,98,55],[91,8,98,57,"login"],[91,13,98,62],[92,8,98,64,"register"],[92,16,98,72],[93,8,98,74,"logout"],[93,14,98,80],[94,8,98,82,"switchRole"],[94,18,98,92],[95,8,98,94,"refreshUser"],[96,6,98,106],[96,7,98,108],[97,6,98,108,"children"],[97,14,98,108],[97,16,99,7,"children"],[98,4,99,15],[99,6,99,15,"fileName"],[99,14,99,15],[99,16,99,15,"_jsxFileName"],[99,28,99,15],[100,6,99,15,"lineNumber"],[100,16,99,15],[101,6,99,15,"columnNumber"],[101,18,99,15],[102,4,99,15],[102,11,100,26],[102,12,100,27],[103,2,102,0],[104,2,104,7],[104,8,104,13,"useAuth"],[104,15,104,20],[104,18,104,23,"useAuth"],[104,19,104,23],[104,24,104,29],[104,28,104,29,"useContext"],[104,34,104,39],[104,35,104,39,"useContext"],[104,45,104,39],[104,47,104,40,"AuthContext"],[104,58,104,51],[104,59,104,52],[105,0,104,53],[105,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.register","createContext$argument_0.logout","createContext$argument_0.switchRole","createContext$argument_0.refreshUser","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","switchRole","refreshUser","useAuth"],"mappings":"AAA;SCmC,cD;YEC,cF;UGC,cH;cIC,cJ;eKC,cL;OMG;YCK;GDE;yBEE;GFa;gBGE;GHK;mBIE;GJK;iBKE;GLI;qBME;GNG;sBOE;GPG;CNO;uBcE,6Bd"},"hasCjsExports":false},"type":"js/module"}]}