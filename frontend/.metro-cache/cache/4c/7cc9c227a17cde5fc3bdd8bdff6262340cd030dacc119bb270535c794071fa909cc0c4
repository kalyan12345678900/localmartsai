{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":35,"index":195}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => ({}),\n    register: async () => ({}),\n    logout: async () => {},\n    switchRole: async () => {},\n    refreshUser: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        if (storedToken) {\n          setToken(storedToken);\n          const userData = await _utilsApi.api.getMe();\n          setUser(userData);\n        }\n      } catch (e) {\n        await AsyncStorage.default.removeItem('auth_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const result = await _utilsApi.api.login({\n        email,\n        password\n      });\n      await AsyncStorage.default.setItem('auth_token', result.token);\n      setToken(result.token);\n      setUser(result.user);\n      return result.user;\n    };\n    const register = async data => {\n      const result = await _utilsApi.api.register(data);\n      await AsyncStorage.default.setItem('auth_token', result.token);\n      setToken(result.token);\n      setUser(result.user);\n      return result.user;\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    const switchRole = async role => {\n      const updatedUser = await _utilsApi.api.switchRole(role);\n      setUser(updatedUser);\n    };\n    const refreshUser = async () => {\n      const userData = await _utilsApi.api.getMe();\n      setUser(userData);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        switchRole,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this);\n  }\n  const useAuth = () => (0, _react.useContext)(AuthContext);\n});","lineCount":107,"map":[[13,2,43,0,"exports"],[13,9,43,0],[13,10,43,0,"AuthProvider"],[13,22,43,0],[13,25,43,0,"AuthProvider"],[13,37,43,0],[14,2,106,0,"Object"],[14,8,106,0],[14,9,106,0,"defineProperty"],[14,23,106,0],[14,24,106,0,"exports"],[14,31,106,0],[15,4,106,0,"enumerable"],[15,14,106,0],[16,4,106,0,"get"],[16,7,106,0],[16,18,106,0,"get"],[16,19,106,0],[17,6,106,0],[17,13,106,0,"useAuth"],[17,20,106,0],[18,4,106,0],[19,2,106,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,42,2,0],[21,45,2,0,"require"],[21,52,2,0],[21,53,2,0,"_dependencyMap"],[21,67,2,0],[22,2,2,0],[22,6,2,0,"AsyncStorage"],[22,18,2,0],[22,21,2,0,"_interopDefault"],[22,36,2,0],[22,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,73,2,0],[23,2,3,0],[23,6,3,0,"_utilsApi"],[23,15,3,0],[23,18,3,0,"require"],[23,25,3,0],[23,26,3,0,"_dependencyMap"],[23,40,3,0],[24,2,3,35],[24,6,3,35,"_reactJsxDevRuntime"],[24,25,3,35],[24,28,3,35,"require"],[24,35,3,35],[24,36,3,35,"_dependencyMap"],[24,50,3,35],[25,2,32,0],[25,8,32,6,"AuthContext"],[25,19,32,17],[25,35,32,20],[25,39,32,20,"createContext"],[25,45,32,33],[25,46,32,33,"createContext"],[25,59,32,33],[25,61,32,51],[26,4,33,2,"user"],[26,8,33,6],[26,10,33,8],[26,14,33,12],[27,4,34,2,"token"],[27,9,34,7],[27,11,34,9],[27,15,34,13],[28,4,35,2,"loading"],[28,11,35,9],[28,13,35,11],[28,17,35,15],[29,4,36,2,"login"],[29,9,36,7],[29,11,36,9],[29,17,36,9,"login"],[29,18,36,9],[29,24,36,22],[29,25,36,23],[29,26,36,24],[29,27,36,32],[30,4,37,2,"register"],[30,12,37,10],[30,14,37,12],[30,20,37,12,"register"],[30,21,37,12],[30,27,37,25],[30,28,37,26],[30,29,37,27],[30,30,37,35],[31,4,38,2,"logout"],[31,10,38,8],[31,12,38,10],[31,18,38,10,"logout"],[31,19,38,10],[31,24,38,22],[31,25,38,23],[31,26,38,24],[32,4,39,2,"switchRole"],[32,14,39,12],[32,16,39,14],[32,22,39,14,"switchRole"],[32,23,39,14],[32,28,39,26],[32,29,39,27],[32,30,39,28],[33,4,40,2,"refreshUser"],[33,15,40,13],[33,17,40,15],[33,23,40,15,"refreshUser"],[33,24,40,15],[33,29,40,27],[33,30,40,28],[34,2,41,0],[34,3,41,1],[34,4,41,2],[35,2,43,7],[35,11,43,16,"AuthProvider"],[35,23,43,28,"AuthProvider"],[35,24,43,29],[36,4,43,31,"children"],[37,2,43,65],[37,3,43,66],[37,5,43,68],[38,4,44,2],[38,10,44,8],[38,11,44,9,"user"],[38,15,44,13],[38,17,44,15,"setUser"],[38,24,44,22],[38,25,44,23],[38,28,44,26],[38,32,44,26,"useState"],[38,38,44,34],[38,39,44,34,"useState"],[38,47,44,34],[38,49,44,48],[38,53,44,52],[38,54,44,53],[39,4,45,2],[39,10,45,8],[39,11,45,9,"token"],[39,16,45,14],[39,18,45,16,"setToken"],[39,26,45,24],[39,27,45,25],[39,30,45,28],[39,34,45,28,"useState"],[39,40,45,36],[39,41,45,36,"useState"],[39,49,45,36],[39,51,45,52],[39,55,45,56],[39,56,45,57],[40,4,46,2],[40,10,46,8],[40,11,46,9,"loading"],[40,18,46,16],[40,20,46,18,"setLoading"],[40,30,46,28],[40,31,46,29],[40,34,46,32],[40,38,46,32,"useState"],[40,44,46,40],[40,45,46,40,"useState"],[40,53,46,40],[40,55,46,41],[40,59,46,45],[40,60,46,46],[41,4,48,2],[41,8,48,2,"useEffect"],[41,14,48,11],[41,15,48,11,"useEffect"],[41,24,48,11],[41,26,48,12],[41,32,48,18],[42,6,49,4,"loadStoredAuth"],[42,20,49,18],[42,21,49,19],[42,22,49,20],[43,4,50,2],[43,5,50,3],[43,7,50,5],[43,9,50,7],[43,10,50,8],[44,4,52,2],[44,10,52,8,"loadStoredAuth"],[44,24,52,22],[44,27,52,25],[44,33,52,25,"loadStoredAuth"],[44,34,52,25],[44,39,52,37],[45,6,53,4],[45,10,53,8],[46,8,54,6],[46,14,54,12,"storedToken"],[46,25,54,23],[46,28,54,26],[46,34,54,32,"AsyncStorage"],[46,46,54,44],[46,47,54,44,"default"],[46,54,54,44],[46,55,54,45,"getItem"],[46,62,54,52],[46,63,54,53],[46,75,54,65],[46,76,54,66],[47,8,55,6],[47,12,55,10,"storedToken"],[47,23,55,21],[47,25,55,23],[48,10,56,8,"setToken"],[48,18,56,16],[48,19,56,17,"storedToken"],[48,30,56,28],[48,31,56,29],[49,10,57,8],[49,16,57,14,"userData"],[49,24,57,22],[49,27,57,25],[49,33,57,31,"api"],[49,42,57,34],[49,43,57,34,"api"],[49,46,57,34],[49,47,57,35,"getMe"],[49,52,57,40],[49,53,57,41],[49,54,57,42],[50,10,58,8,"setUser"],[50,17,58,15],[50,18,58,16,"userData"],[50,26,58,24],[50,27,58,25],[51,8,59,6],[52,6,60,4],[52,7,60,5],[52,8,60,6],[52,15,60,13,"e"],[52,16,60,14],[52,18,60,16],[53,8,61,6],[53,14,61,12,"AsyncStorage"],[53,26,61,24],[53,27,61,24,"default"],[53,34,61,24],[53,35,61,25,"removeItem"],[53,45,61,35],[53,46,61,36],[53,58,61,48],[53,59,61,49],[54,6,62,4],[54,7,62,5],[54,16,62,14],[55,8,63,6,"setLoading"],[55,18,63,16],[55,19,63,17],[55,24,63,22],[55,25,63,23],[56,6,64,4],[57,4,65,2],[57,5,65,3],[58,4,67,2],[58,10,67,8,"login"],[58,15,67,13],[58,18,67,16],[58,24,67,16,"login"],[58,25,67,23,"email"],[58,30,67,36],[58,32,67,38,"password"],[58,40,67,54],[58,45,67,59],[59,6,68,4],[59,12,68,10,"result"],[59,18,68,16],[59,21,68,19],[59,27,68,25,"api"],[59,36,68,28],[59,37,68,28,"api"],[59,40,68,28],[59,41,68,29,"login"],[59,46,68,34],[59,47,68,35],[60,8,68,37,"email"],[60,13,68,42],[61,8,68,44,"password"],[62,6,68,53],[62,7,68,54],[62,8,68,55],[63,6,69,4],[63,12,69,10,"AsyncStorage"],[63,24,69,22],[63,25,69,22,"default"],[63,32,69,22],[63,33,69,23,"setItem"],[63,40,69,30],[63,41,69,31],[63,53,69,43],[63,55,69,45,"result"],[63,61,69,51],[63,62,69,52,"token"],[63,67,69,57],[63,68,69,58],[64,6,70,4,"setToken"],[64,14,70,12],[64,15,70,13,"result"],[64,21,70,19],[64,22,70,20,"token"],[64,27,70,25],[64,28,70,26],[65,6,71,4,"setUser"],[65,13,71,11],[65,14,71,12,"result"],[65,20,71,18],[65,21,71,19,"user"],[65,25,71,23],[65,26,71,24],[66,6,72,4],[66,13,72,11,"result"],[66,19,72,17],[66,20,72,18,"user"],[66,24,72,22],[67,4,73,2],[67,5,73,3],[68,4,75,2],[68,10,75,8,"register"],[68,18,75,16],[68,21,75,19],[68,27,75,26,"data"],[68,31,75,35],[68,35,75,40],[69,6,76,4],[69,12,76,10,"result"],[69,18,76,16],[69,21,76,19],[69,27,76,25,"api"],[69,36,76,28],[69,37,76,28,"api"],[69,40,76,28],[69,41,76,29,"register"],[69,49,76,37],[69,50,76,38,"data"],[69,54,76,42],[69,55,76,43],[70,6,77,4],[70,12,77,10,"AsyncStorage"],[70,24,77,22],[70,25,77,22,"default"],[70,32,77,22],[70,33,77,23,"setItem"],[70,40,77,30],[70,41,77,31],[70,53,77,43],[70,55,77,45,"result"],[70,61,77,51],[70,62,77,52,"token"],[70,67,77,57],[70,68,77,58],[71,6,78,4,"setToken"],[71,14,78,12],[71,15,78,13,"result"],[71,21,78,19],[71,22,78,20,"token"],[71,27,78,25],[71,28,78,26],[72,6,79,4,"setUser"],[72,13,79,11],[72,14,79,12,"result"],[72,20,79,18],[72,21,79,19,"user"],[72,25,79,23],[72,26,79,24],[73,6,80,4],[73,13,80,11,"result"],[73,19,80,17],[73,20,80,18,"user"],[73,24,80,22],[74,4,81,2],[74,5,81,3],[75,4,83,2],[75,10,83,8,"logout"],[75,16,83,14],[75,19,83,17],[75,25,83,17,"logout"],[75,26,83,17],[75,31,83,29],[76,6,84,4],[76,12,84,10,"AsyncStorage"],[76,24,84,22],[76,25,84,22,"default"],[76,32,84,22],[76,33,84,23,"removeItem"],[76,43,84,33],[76,44,84,34],[76,56,84,46],[76,57,84,47],[77,6,85,4,"setToken"],[77,14,85,12],[77,15,85,13],[77,19,85,17],[77,20,85,18],[78,6,86,4,"setUser"],[78,13,86,11],[78,14,86,12],[78,18,86,16],[78,19,86,17],[79,4,87,2],[79,5,87,3],[80,4,89,2],[80,10,89,8,"switchRole"],[80,20,89,18],[80,23,89,21],[80,29,89,28,"role"],[80,33,89,40],[80,37,89,45],[81,6,90,4],[81,12,90,10,"updatedUser"],[81,23,90,21],[81,26,90,24],[81,32,90,30,"api"],[81,41,90,33],[81,42,90,33,"api"],[81,45,90,33],[81,46,90,34,"switchRole"],[81,56,90,44],[81,57,90,45,"role"],[81,61,90,49],[81,62,90,50],[82,6,91,4,"setUser"],[82,13,91,11],[82,14,91,12,"updatedUser"],[82,25,91,23],[82,26,91,24],[83,4,92,2],[83,5,92,3],[84,4,94,2],[84,10,94,8,"refreshUser"],[84,21,94,19],[84,24,94,22],[84,30,94,22,"refreshUser"],[84,31,94,22],[84,36,94,34],[85,6,95,4],[85,12,95,10,"userData"],[85,20,95,18],[85,23,95,21],[85,29,95,27,"api"],[85,38,95,30],[85,39,95,30,"api"],[85,42,95,30],[85,43,95,31,"getMe"],[85,48,95,36],[85,49,95,37],[85,50,95,38],[86,6,96,4,"setUser"],[86,13,96,11],[86,14,96,12,"userData"],[86,22,96,20],[86,23,96,21],[87,4,97,2],[87,5,97,3],[88,4,99,2],[88,24,100,4],[88,28,100,4,"_reactJsxDevRuntime"],[88,47,100,4],[88,48,100,4,"jsxDEV"],[88,54,100,4],[88,56,100,5,"AuthContext"],[88,67,100,16],[88,68,100,17,"Provider"],[88,76,100,25],[89,6,100,26,"value"],[89,11,100,31],[89,13,100,33],[90,8,100,35,"user"],[90,12,100,39],[91,8,100,41,"token"],[91,13,100,46],[92,8,100,48,"loading"],[92,15,100,55],[93,8,100,57,"login"],[93,13,100,62],[94,8,100,64,"register"],[94,16,100,72],[95,8,100,74,"logout"],[95,14,100,80],[96,8,100,82,"switchRole"],[96,18,100,92],[97,8,100,94,"refreshUser"],[98,6,100,106],[98,7,100,108],[99,6,100,108,"children"],[99,14,100,108],[99,16,101,7,"children"],[100,4,101,15],[101,6,101,15,"fileName"],[101,14,101,15],[101,16,101,15,"_jsxFileName"],[101,28,101,15],[102,6,101,15,"lineNumber"],[102,16,101,15],[103,6,101,15,"columnNumber"],[103,18,101,15],[104,4,101,15],[104,11,102,26],[104,12,102,27],[105,2,104,0],[106,2,106,7],[106,8,106,13,"useAuth"],[106,15,106,20],[106,18,106,23,"useAuth"],[106,19,106,23],[106,24,106,29],[106,28,106,29,"useContext"],[106,34,106,39],[106,35,106,39,"useContext"],[106,45,106,39],[106,47,106,40,"AuthContext"],[106,58,106,51],[106,59,106,52],[107,0,106,53],[107,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.register","createContext$argument_0.logout","createContext$argument_0.switchRole","createContext$argument_0.refreshUser","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","switchRole","refreshUser","useAuth"],"mappings":"AAA;SCmC,uBD;YEC,uBF;UGC,cH;cIC,cJ;eKC,cL;OMG;YCK;GDE;yBEE;GFa;gBGE;GHM;mBIE;GJM;iBKE;GLI;qBME;GNG;sBOE;GPG;CNO;uBcE,6Bd"},"hasCjsExports":false},"type":"js/module"}]}